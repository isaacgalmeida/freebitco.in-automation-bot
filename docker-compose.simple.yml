version: "3.8"

services:
  freebitcoin-bot:
    image: selenium/standalone-chrome:131.0-20241225
    container_name: freebitcoin-bot
    volumes:
      # Map your existing project files
      - ./app.py:/app/app.py:ro # Your working app.py
      - ./CloudflareBypasser.py:/app/CloudflareBypasser.py:ro
      - ./requirements.txt:/app/requirements.txt:ro
      - ./.env:/app/.env:ro # Environment variables
      - ./cookies.json:/app/cookies.json:rw # Authentication cookies
      - ./cloudflare_bypass.log:/app/cloudflare_bypass.log:rw # Log file
      - /dev/shm:/dev/shm # Shared memory for Chrome
    environment:
      # Python environment
      - PYTHONUNBUFFERED=1
      - PYTHONPATH=/app
      - DISPLAY=:99

    working_dir: /app
    command: >
      bash -c "
        echo 'ðŸš€ Installing Python dependencies...' &&
        apt-get update -qq &&
        apt-get install -y -qq python3 python3-pip &&
        pip3 install --quiet --no-cache-dir -r requirements.txt &&
        echo 'ðŸ¤– Starting FreeBitco.in bot...' &&
        python3 app.py
      "
    restart: unless-stopped
    shm_size: "2g"
    cpus: "1.0"
    mem_limit: 2g
